import java.io.{PrintWriter, File}

import models.project.JiraProject
import org.junit.runner.RunWith
import org.scalatest.junit.JUnitRunner

/**
 * Created by nnovod on 4/26/15.
 */
@RunWith(classOf[JUnitRunner])
class EZPassSpec extends TestSpec with TestConfig {
	val rackScan =
		"""DATETIME,RACK,TUBE,BARCODE
12/22/2014 14:21:06,XX-11227502,A01,0177159455
12/22/2014 14:21:06,XX-11227502,B01,0177159432
12/22/2014 14:21:06,XX-11227502,C01,0177159431
12/22/2014 14:21:06,XX-11227502,D01,0177159408
12/22/2014 14:21:06,XX-11227502,E01,0177159407
12/22/2014 14:21:06,XX-11227502,F01,0177159384
12/22/2014 14:21:06,XX-11227502,G01,0177156115
12/22/2014 14:21:06,XX-11227502,H01,0177159360
12/22/2014 14:21:06,XX-11227502,A02,0177159454
12/22/2014 14:21:06,XX-11227502,B02,0177159433
12/22/2014 14:21:06,XX-11227502,C02,0177159430
12/22/2014 14:21:06,XX-11227502,D02,0177159409
12/22/2014 14:21:06,XX-11227502,E02,0177159406
12/22/2014 14:21:06,XX-11227502,F02,0177159385
12/22/2014 14:21:06,XX-11227502,G02,0177159382
12/22/2014 14:21:06,XX-11227502,H02,0177159361
12/22/2014 14:21:06,XX-11227502,A03,0177159453
12/22/2014 14:21:06,XX-11227502,B03,0177159434
12/22/2014 14:21:06,XX-11227502,C03,0177159429
12/22/2014 14:21:06,XX-11227502,D03,0177159410
12/22/2014 14:21:06,XX-11227502,E03,0177159405
12/22/2014 14:21:06,XX-11227502,F03,0177159386
12/22/2014 14:21:06,XX-11227502,G03,0177159381
12/22/2014 14:21:06,XX-11227502,H03,0177159362
12/22/2014 14:21:06,XX-11227502,A04,0177159452
12/22/2014 14:21:06,XX-11227502,B04,0177159435
12/22/2014 14:21:06,XX-11227502,C04,0177159428
12/22/2014 14:21:06,XX-11227502,D04,0177159411
12/22/2014 14:21:06,XX-11227502,E04,0177159404
12/22/2014 14:21:06,XX-11227502,F04,0177159387
12/22/2014 14:21:06,XX-11227502,G04,0177159380
12/22/2014 14:21:06,XX-11227502,H04,0177159363
12/22/2014 14:21:06,XX-11227502,A05,0177159451
12/22/2014 14:21:06,XX-11227502,B05,0177159436
12/22/2014 14:21:06,XX-11227502,C05,0177159427
12/22/2014 14:21:06,XX-11227502,D05,0177159412
12/22/2014 14:21:06,XX-11227502,E05,0177159403
12/22/2014 14:21:06,XX-11227502,F05,0177159388
12/22/2014 14:21:06,XX-11227502,G05,0177159379
12/22/2014 14:21:06,XX-11227502,H05,0177195873
12/22/2014 14:21:06,XX-11227502,A06,0177159450
12/22/2014 14:21:06,XX-11227502,B06,0177159437
12/22/2014 14:21:06,XX-11227502,C06,0177159426
12/22/2014 14:21:06,XX-11227502,D06,0177159413
12/22/2014 14:21:06,XX-11227502,E06,0177159402
12/22/2014 14:21:06,XX-11227502,F06,0177159389
12/22/2014 14:21:06,XX-11227502,G06,0177159378
12/22/2014 14:21:06,XX-11227502,H06,0177195874
12/22/2014 14:21:06,XX-11227502,A07,0177159449
12/22/2014 14:21:06,XX-11227502,B07,0177159438
12/22/2014 14:21:06,XX-11227502,C07,0177159425
12/22/2014 14:21:06,XX-11227502,D07,0177159414
12/22/2014 14:21:06,XX-11227502,E07,0177159401
12/22/2014 14:21:06,XX-11227502,F07,0177159390
12/22/2014 14:21:06,XX-11227502,G07,0177159377
12/22/2014 14:21:06,XX-11227502,H07,0177195875
12/22/2014 14:21:06,XX-11227502,A08,0177159448
12/22/2014 14:21:06,XX-11227502,B08,0177156117
12/22/2014 14:21:06,XX-11227502,C08,0177159424
12/22/2014 14:21:06,XX-11227502,D08,0177159415
12/22/2014 14:21:06,XX-11227502,E08,0177159400
12/22/2014 14:21:06,XX-11227502,F08,0177159391
12/22/2014 14:21:06,XX-11227502,G08,0177159376
12/22/2014 14:21:06,XX-11227502,H08,0177195863
12/22/2014 14:21:06,XX-11227502,A09,0177159447
12/22/2014 14:21:06,XX-11227502,B09,0177159440
12/22/2014 14:21:06,XX-11227502,C09,0177159423
12/22/2014 14:21:06,XX-11227502,D09,0177159416
12/22/2014 14:21:06,XX-11227502,E09,0177159399
12/22/2014 14:21:06,XX-11227502,F09,0177159392
12/22/2014 14:21:06,XX-11227502,G09,0177159375
12/22/2014 14:21:06,XX-11227502,H09,0177195862
12/22/2014 14:21:06,XX-11227502,A10,0177159446
12/22/2014 14:21:06,XX-11227502,B10,0177159441
12/22/2014 14:21:06,XX-11227502,C10,0177159422
12/22/2014 14:21:06,XX-11227502,D10,0177159417
12/22/2014 14:21:06,XX-11227502,E10,0177159398
12/22/2014 14:21:06,XX-11227502,F10,0177159393
12/22/2014 14:21:06,XX-11227502,G10,0177159374
12/22/2014 14:21:06,XX-11227502,H10,0177195861
12/22/2014 14:21:06,XX-11227502,A11,0177159445
12/22/2014 14:21:06,XX-11227502,B11,0177159442
12/22/2014 14:21:06,XX-11227502,C11,0177159421
12/22/2014 14:21:06,XX-11227502,D11,0177159418
12/22/2014 14:21:06,XX-11227502,E11,0177159397
12/22/2014 14:21:06,XX-11227502,F11,0177159394
12/22/2014 14:21:06,XX-11227502,G11,0177159373
12/22/2014 14:21:06,XX-11227502,H11,0177195860
12/22/2014 14:21:06,XX-11227502,A12,0177159444
12/22/2014 14:21:06,XX-11227502,B12,0177159443
12/22/2014 14:21:06,XX-11227502,C12,0177159420
12/22/2014 14:21:06,XX-11227502,D12,0177159419
12/22/2014 14:21:06,XX-11227502,E12,0177159396
12/22/2014 14:21:06,XX-11227502,F12,0177159395
12/22/2014 14:21:06,XX-11227502,G12,0177159372
12/22/2014 14:21:06,XX-11227502,H12,0177195859
"""

	"The rackscan" must {
		"be input" in {
			// Make rack scan file
			val tFile = File.createTempFile("TRACKER_", ".csv")
			val outFile = new PrintWriter(tFile, "UTF-8")
			outFile.write(rackScan.toArray[Char])
			outFile.close()

			val racks = JiraProject.makeRackScanList(tFile.getCanonicalPath)
			val tubeList = racks.list.head.contents
			tubeList.size mustBe 96
			JiraProject.insertRackIssueCollection(racks, "FakeProject")
			val rackBack = JiraProject.getRackIssueCollection("XX-11227502")
			rackBack._1.head.issue mustBe "FakeProject"
			rackBack._1.head.list.head.contents.size mustBe tubeList.size
		}
	}
}
